<!DOCTYPE html>
<html lang="hu">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K≈ëszegAPP - J√°t√©k QR K√≥dok</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body {
            font-family: sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            text-align: center;
        }

        h1 {
            margin-bottom: 10px;
        }

        .controls {
            margin-bottom: 30px;
            padding: 15px;
            background: #f0f0f0;
            border-radius: 8px;
            display: inline-block;
        }

        .grid {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
        }

        .card {
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 10px;
            width: 220px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            background: white;
            page-break-inside: avoid;
        }

        .card h3 {
            font-size: 16px;
            margin: 0 0 10px 0;
            height: 40px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qr-container {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }

        .url {
            font-size: 10px;
            color: #666;
            word-break: break-all;
        }

        select,
        button {
            padding: 5px 10px;
            font-size: 16px;
            cursor: pointer;
        }

        @media print {
            .controls {
                display: none;
            }

            body {
                max-width: 100%;
            }
        }
    </style>
</head>

<body>

    <h1>K≈ëszeg Kincsvad√°sz - Helysz√≠n QR K√≥dok</h1>

    <div class="controls">
        <label>B√°zis URL:</label>
        <select id="baseUrlSelect" onchange="updateBaseUrl()">
            <option value="https://koszegapp.netlify.app">√âLES (koszegapp.netlify.app)</option>
            <option value="http://localhost:3000">HELYI (localhost:3000)</option>
            <option value="custom">Egy√©ni (pl. 192.168.x.x:3000)</option>
        </select>

        <input type="text" id="customUrlInput" placeholder="http://192.168.1.10:3000"
            style="display:none; width: 200px;" onkeyup="generateQRs()">

        <button onclick="window.print()">üñ®Ô∏è Nyomtat√°s / PDF ment√©s</button>
    </div>

    <div id="grid" class="grid"></div>

    <script>
        // Adatok a hidden_gems.json alapj√°n
        const locations = [
            { id: "varoshaza", name: "1. V√°rosh√°za" },
            { id: "jurisics-ter", name: "2. Jurisics t√©r" },
            { id: "ovaros-falak", name: "3. √ìv√°ros falmaradv√°nyai" },
            { id: "varkor", name: "4. V√°rk√∂r" },
            { id: "tabornokhaz", name: "5. T√°bornokh√°z" },
            { id: "labashaz", name: "6. L√°bash√°z" },
            { id: "chernel-haz", name: "7. Chernel-h√°z" },
            { id: "szent-jakab", name: "8. Szent Jakab Templom" },
            { id: "sgraffitos-haz", name: "9. Sgraffit√≥s-h√°z" },
            { id: "jezus-szive", name: "10. J√©zus Sz√≠ve Templom" },
            { id: "egykori-varoskapu", name: "11. H≈ës√∂k Tornya (V√°roskapu)" },
            { id: "jurisics-var", name: "12. Jurisics V√°r (V√âGC√âL)" },
            { id: "koronaorzo-bunker", name: "EXTRA: Korona≈ërz≈ë Bunker" },
            { id: "chernel-kert", name: "EXTRA: Chernel-kert" }
        ];

        function updateBaseUrl() {
            const select = document.getElementById('baseUrlSelect');
            const input = document.getElementById('customUrlInput');

            if (select.value === 'custom') {
                input.style.display = 'inline-block';
                input.focus();
            } else {
                input.style.display = 'none';
                generateQRs();
            }
        }

        function generateQRs() {
            const grid = document.getElementById('grid');
            const select = document.getElementById('baseUrlSelect');
            let baseUrl = select.value;

            if (baseUrl === 'custom') {
                baseUrl = document.getElementById('customUrlInput').value;
                if (!baseUrl) return; // Ne gener√°ljon, ha √ºres
            }

            // Remove trailing slash if present
            if (baseUrl.endsWith('/')) baseUrl = baseUrl.slice(0, -1);

            grid.innerHTML = '';

            locations.forEach(loc => {
                const card = document.createElement('div');
                card.className = 'card';

                // J√°t√©k √∫tvonal URL: /game/gem/{id}
                const fullUrl = `${baseUrl}/game/gem/${loc.id}`;

                const title = document.createElement('h3');
                title.innerText = loc.name;

                const qrContainer = document.createElement('div');
                qrContainer.className = 'qr-container';
                const qrDiv = document.createElement('div');
                qrContainer.appendChild(qrDiv);

                const urlText = document.createElement('div');
                urlText.className = 'url';
                urlText.innerText = `/game/gem/${loc.id}`;

                card.appendChild(title);
                card.appendChild(qrContainer);
                card.appendChild(urlText);
                grid.appendChild(card);

                // QR k√≥d gener√°l√°s
                new QRCode(qrDiv, {
                    text: fullUrl,
                    width: 128,
                    height: 128,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H
                });
            });
        }

        // Ind√≠t√°s
        generateQRs();
    </script>

</body>

</html>